{% extends "base/SuperAdmin.html" %}
{% block content %}



<div class="row g-4 mb-4">
  
  <div class="col-12 col-sm-4 col-xl-4">
    <div class="card">
      <div class="card-body">
        <div class="d-flex align-items-start justify-content-between">
          <div class="content-left">
            <span class="text-heading">Total Open</span>
            <div class="d-flex align-items-center my-1">
              <h4 class="mb-0 me-2 fs-3 fw-semibold">{{ total_open or 0 }}</h4>
            </div>
          </div>
          <div class="avatar">
            <span class="avatar-initial rounded bg-label-primary">
              <i class="bi bi-clipboard-minus fs-3"></i>
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-12 col-sm-4 col-xl-4">
    <div class="card">
      <div class="card-body">
        <div class="d-flex align-items-start justify-content-between">
          <div class="content-left">
            <span class="text-heading">Total In Progress</span>
            <div class="d-flex align-items-center my-1">
              <h4 class="mb-0 me-2 fs-3 fw-semibold">{{ total_in_progress or 0 }}</h4>
            </div>
          </div>
          <div class="avatar">
            <span class="avatar-initial rounded bg-label-primary">
              <i class="bi bi-clipboard fs-3"></i>
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-12 col-sm-4 col-xl-4">
    <div class="card">
      <div class="card-body">
        <div class="d-flex align-items-start justify-content-between">
          <div class="content-left">
            <span class="text-heading">Total Resolved</span>
            <div class="d-flex align-items-center my-1">
              <h4 class="mb-0 me-2 fs-3 fw-semibold">{{ total_resolved or 0 }}</h4>
            </div>
          </div>
          <div class="avatar">
            <span class="avatar-initial rounded bg-label-primary">
              <i class="bi bi-clipboard-check fs-3"></i>
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>


<div class="col-xl-12">

  <div class="nav-align-top mb-4">
      <ul class="nav nav-pills mb-3" role="tablist">


        <li class="nav-item">
          <button type="button" class="nav-link" role="tab" data-bs-toggle="tab" 
                  data-bs-target="#navs-pills-travel-order" id="travel-order-tab" 
                  aria-controls="navs-pills-travel-order" aria-selected="true">
                  Open
          </button>
        </li>

        <li class="nav-item">
          <button type="button" class="nav-link" role="tab" data-bs-toggle="tab" 
                  data-bs-target="#navs-pills-Leave-Credits" id="Leave-Credits-tab" 
                  aria-controls="navs-pills-Leave-Credits" aria-selected="false">
                  In Progress
          </button>
        </li>
    
      

        <li class="nav-item">
          <button type="button" class="nav-link" role="tab" data-bs-toggle="tab" 
                  data-bs-target="#navs-pills-JO" id="JO-tab" 
                  aria-controls="navs-pills-JO" aria-selected="false">
                  Resolved
          </button>
        </li>
    
     
      </ul>
    
      <div class="tab-content h-100 min-vh-100">

        <!-- IN PROGRESS -->
        <div class="tab-pane fade " id="navs-pills-Leave-Credits" role="tabpanel" aria-labelledby="Leave-Credits-tab">

        
        <div class="card-datable">
          <div class="row mx-1 my-4 align-items-center justify-content-between border-bottom pb-3 mt-2">
            
            <!-- Left: Length selector -->
            <div class="col-12 col-md-auto mb-3 mb-md-0 ps-0">
              <h5 class="card-title mb-0">In-Progress Issues</h5>

            </div>
        
            <!-- Right: Search, Export, Add -->
           <div class="col-12 col-md d-flex flex-wrap gap-3 justify-content-end">
              <!-- Export Button -->
              <div class="btn-group">
                <button class="btn btn-outline-secondary dropdown-toggle d-flex align-items-center"
                        type="button"
                        id="exportDropdown"
                        data-bs-toggle="dropdown"
                        aria-expanded="false">
                  <i class="bi bi-box-arrow-up me-1"></i>
                  <span>Export</span>
                </button>
                <ul class="dropdown-menu" aria-labelledby="exportDropdown">
                  <li>
                    <a class="dropdown-item" href="{{ url_for('generate_inprogress_issues_pdf') }}">
                      <i class="bi bi-file-pdf me-2"></i>Export as PDF
                    </a>
                  </li>
                  <li><hr class="dropdown-divider"></li>
                  <li>
                    <a class="dropdown-item" href="{{ url_for('print_inprogress_issues') }}" target="_blank">
                      <i class="bi bi-printer me-2"></i>Print
                    </a>
                  </li>
                </ul>
              </div>
            </div>

          </div>
  
  
          <div class="dt-layout-table" >
              <div class="d-md-flex justify-content-between align-items-center dt-layout-full table-responsive" style="flex: 1; overflow: auto;">
                   <table id="inProgressTable" class="table table-bordered bg-light">
                        <thead class="table-dark text-center">
                            <tr>
                            <th>Reported By</th>
                            <th>Reporter Department</th>
                            <th>Reported Employee</th>
                            <th>Reported Department</th>
                            <th>Title</th>
                            <th>Description</th>
                            <th>Status</th>
                            <th>Reported At</th>
                            <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                          {% for issue in in_progress_issues  %}
                          <tr>
                            <!-- Reported By -->
                            <td>{{ issue.reporter.name }}</td>

                            <!-- Reporter Department -->
                            <td>
                              {% set emp = issue.reporter.employee %}
                              {% if emp %}
                                {% if emp.permanent_details and emp.department %}
                                  {{ emp.department.name }}
                                {% elif emp.casual_details and emp.casual_details.assigned_department %}
                                  {{ emp.casual_details.assigned_department.name }}
                                {% elif emp.job_order_details and emp.job_order_details.assigned_department %}
                                  {{ emp.job_order_details.assigned_department.name }}
                                {% else %}
                                  N/A
                                {% endif %}
                              {% else %}
                                N/A
                              {% endif %}
                            </td>

                            <!-- Reported Employee -->
                            <td>
                              {% if issue.reported.employee %}
                                {{ issue.reported.employee.first_name }} {{ issue.reported.employee.last_name }}
                              {% else %}
                                No employee info
                              {% endif %}
                            </td>

                            <!-- Reported Department -->
                            <td>
                              {% set emp = issue.reported.employee %}
                              {% if emp %}
                                {% if emp.permanent_details and emp.department %}
                                  {{ emp.department.name }}
                                {% elif emp.casual_details and emp.casual_details.assigned_department %}
                                  {{ emp.casual_details.assigned_department.name }}
                                {% elif emp.job_order_details and emp.job_order_details.assigned_department %}
                                  {{ emp.job_order_details.assigned_department.name }}
                                {% else %}
                                  N/A
                                {% endif %}
                              {% else %}
                                N/A
                              {% endif %}
                            </td>

                            <!-- Title -->
                            <td>{{ issue.title }}</td>
                                <td>{{ issue.description }}</td>
                                <td>
                                    {% if issue.status == 'Open' %}
                                        <span class="badge bg-primary">{{ issue.status }}</span>
                                    {% elif issue.status == 'In Progress' %}
                                        <span class="badge bg-warning text-dark">{{ issue.status }}</span>
                                    {% elif issue.status == 'Resolved' %}
                                        <span class="badge bg-success">{{ issue.status }}</span>
                                    {% elif issue.status == 'Closed' %}
                                        <span class="badge bg-secondary">{{ issue.status }}</span>
                                    {% else %}
                                        <span class="badge bg-info">{{ issue.status }}</span>
                                    {% endif %}
                                    </td>
                                <td>{{ issue.created_at.strftime('%B %d, %Y') }}</td>
                                    <td>
                                <!-- Button to trigger the modal -->
                                <button class="btn btn-sm btn-info" data-bs-toggle="modal" data-bs-target="#remarksModal{{ issue.id }}">
                                  Add Remarks
                                </button>
                              </td>
                            </tr>
                 
                            {% endfor %}
                            </tbody>

                        </table>
                        
          </div>
      
 

      </div>
        </div>

        </div>
    
        <!-- OPEN -->
      <div class="tab-pane fade show" id="navs-pills-travel-order" role="tabpanel" aria-labelledby="travel-order-tab">
      
          <div class="card-datable">
            <div class="row mx-1 my-4 align-items-center justify-content-between border-bottom pb-3 mt-2">
              
              <!-- Left: Length selector -->
              <div class="col-12 col-md-auto mb-3 mb-md-0 ps-0">
                <h5 class="card-title mb-0">Open Issues</h5>

              </div>
          
              <!-- Right: Search, Export, Add -->
              <div class="col-12 col-md d-flex flex-wrap gap-3 justify-content-end">
                <div class="btn-group">
                  <button class="btn btn-outline-secondary dropdown-toggle d-flex align-items-center"
                          type="button"
                          id="exportDropdown"
                          data-bs-toggle="dropdown"
                          aria-expanded="false">
                    <i class="bi bi-box-arrow-up me-1"></i>
                    <span>Export</span>
                  </button>
                  <ul class="dropdown-menu" aria-labelledby="exportDropdown">
                    <li>
                      <a class="dropdown-item" href="{{ url_for('generate_open_issue_summary_pdf') }}">
                        <i class="bi bi-file-pdf me-2"></i>Export as PDF
                      </a>
                    </li>
                    <li><hr class="dropdown-divider"></li>
                    <li>
                      <a class="dropdown-item" href="{{ url_for('print_open_issue_summary') }}" target="_blank">
                        <i class="bi bi-printer me-2"></i>Print
                      </a>
                    </li>
                  </ul>
                </div>
              </div>

            </div>
            <div class="dt-layout-table" style="height: 100%; display: flex; flex-direction: column;">
                <div class="d-md-flex justify-content-between align-items-center dt-layout-full table-responsive" style="flex: 1; overflow: auto;">
                     <table id="openTable" class="table table-bordered bg-light">
                        <thead class="table-dark text-center">
                            <tr>
                              <th>Reported By</th>
                              <th>Reporter Department</th>
                              <th>Reported Employee</th>
                              <th>Reported Department</th>
                              <th>Title</th>
                              <th>Description</th>
                              <th>Status</th>
                              <th>Reported At</th>
                              <th>Action</th>
                            </tr>
                        </thead>
                          <tbody class="text-center">
                            {% for issue in open_issues  %}
                            <tr>
                              <!-- Reporter Name -->
                              <td class="emp-name">{{ issue.reporter.name }}</td>

                              <!-- Reporter Department -->
                              <td class="dept-name">
                                {% set emp = issue.reporter.employee %}
                                {% if emp %}
                                  {% if emp.permanent_details and emp.department %}
                                    {{ emp.department.name }}
                                  {% elif emp.casual_details and emp.casual_details.assigned_department %}
                                    {{ emp.casual_details.assigned_department.name }}
                                  {% elif emp.job_order_details and emp.job_order_details.assigned_department %}
                                    {{ emp.job_order_details.assigned_department.name }}
                                  {% else %}
                                    N/A
                                  {% endif %}
                                {% else %}
                                  N/A
                                {% endif %}
                              </td>

                              <!-- Reported Employee Name -->
                              <td class="emp-name">
                                {% if issue.reported.employee %}
                                  {{ issue.reported.employee.first_name }} {{ issue.reported.employee.last_name }}
                                {% else %}
                                  No employee info
                                {% endif %}
                              </td>

                              <!-- Reported Department -->
                              <td class="dept-name">
                                {% set emp = issue.reported.employee %}
                                {% if emp %}
                                  {% if emp.permanent_details and emp.department %}
                                    {{ emp.department.name }}
                                  {% elif emp.casual_details and emp.casual_details.assigned_department %}
                                    {{ emp.casual_details.assigned_department.name }}
                                  {% elif emp.job_order_details and emp.job_order_details.assigned_department %}
                                    {{ emp.job_order_details.assigned_department.name }}
                                  {% else %}
                                    N/A
                                  {% endif %}
                                {% else %}
                                  N/A
                                {% endif %}
                              </td>

                              <!-- Issue Title -->
                              <td>{{ issue.title }}</td>

                              <!-- Description -->
                              <td>{{ issue.description }}</td>

                              <!-- Status Badge -->
                              <td>
                                {% if issue.status == 'Open' %}
                                  <span class="badge bg-primary">{{ issue.status }}</span>
                                {% elif issue.status == 'In Progress' %}
                                  <span class="badge bg-warning text-dark">{{ issue.status }}</span>
                                {% elif issue.status == 'Resolved' %}
                                  <span class="badge bg-success">{{ issue.status }}</span>
                                {% elif issue.status == 'Closed' %}
                                  <span class="badge bg-secondary">{{ issue.status }}</span>
                                {% else %}
                                  <span class="badge bg-info">{{ issue.status }}</span>
                                {% endif %}
                              </td>

                              <!-- Created Date -->
                              <td>{{ issue.created_at.strftime('%B %d, %Y') }}</td>

                              <!-- Action -->
                              <td>
                                <button class="btn btn-sm btn-success" data-bs-toggle="modal" data-bs-target="#updateModal{{ issue.id }}">
                                  Accept
                                </button>
                              </td>
                            </tr>
 
                            {% endfor %}
                          </tbody>
                        </table>
            </div>



        </div>
          </div>
        </div>
        
        <!-- RESOLVE -->
        <div class="tab-pane fade" id="navs-pills-JO" role="tabpanel" aria-labelledby="JO-tab">
  
          <div class="card-datable">
            <div class="row mx-1 my-4 align-items-center justify-content-between border-bottom pb-3 mt-2">
              
              <!-- Left: Length selector -->
              <div class="col-12 col-md-auto mb-3 mb-md-0 ps-0">
                <h5 class="card-title mb-0">Resolved Issues</h5>

              </div>
          
              <!-- Right: Search, Export, Add -->
                  <div class="col-12 col-md d-flex flex-wrap gap-3 justify-content-end">
              <!-- Export Button -->
              <div class="btn-group">
                <button class="btn btn-outline-secondary dropdown-toggle d-flex align-items-center"
                        type="button"
                        id="exportDropdown"
                        data-bs-toggle="dropdown"
                        aria-expanded="false">
                  <i class="bi bi-box-arrow-up me-1"></i>
                  <span>Export</span>
                </button>
                <ul class="dropdown-menu" aria-labelledby="exportDropdown">
                  <li>
                    <a class="dropdown-item" href="{{ url_for('print_resolved_issues') }}">
                      <i class="bi bi-file-pdf me-2"></i>Export as PDF
                    </a>
                  </li>
                  <li><hr class="dropdown-divider"></li>
                  <li>
                    <a class="dropdown-item" href="{{ url_for('print_resolved_issues') }}" target="_blank">
                      <i class="bi bi-printer me-2"></i>Print
                    </a>
                  </li>
                </ul>
              </div>
            </div>

            </div>
    
    
            <div class="dt-layout-table" style="height: 100%; display: flex; flex-direction: column;">
                <div class="d-md-flex justify-content-between align-items-center dt-layout-full table-responsive" style="flex: 1; overflow: auto;">
                  <table id="resolvedTable" class="table table-bordered bg-light">
                    <thead class="table-dark text-center">
                        <tr>
                            <th>Reported By</th>
                            <th>Reporter Department</th>
                            <th>Reported Employee</th>
                            <th>Reported Department</th>
                            <th>Title</th>
                            <th>Description</th>
                            <th>Status</th>
                            <th>Reported At</th>
                            <th>Remarks</th>
                        </tr>
                    </thead>
                    <tbody class="text-center">
                        {% for issue in resolved_issues%}
                        <tr>
                            <!-- Reported By -->
                            <td>{{ issue.reporter.name }}</td>

                            <!-- Reporter Department -->
                            <td>
                              {% set emp = issue.reporter.employee %}
                              {% if emp %}
                                {% if emp.permanent_details and emp.department %}
                                  {{ emp.department.name }}
                                {% elif emp.casual_details and emp.casual_details.assigned_department %}
                                  {{ emp.casual_details.assigned_department.name }}
                                {% elif emp.job_order_details and emp.job_order_details.assigned_department %}
                                  {{ emp.job_order_details.assigned_department.name }}
                                {% else %}
                                  N/A
                                {% endif %}
                              {% else %}
                                N/A
                              {% endif %}
                            </td>

                            <!-- Reported Employee -->
                            <td>
                              {% if issue.reported.employee %}
                                {{ issue.reported.employee.first_name }} {{ issue.reported.employee.last_name }}
                              {% else %}
                                No employee info
                              {% endif %}
                            </td>

                            <!-- Reported Department -->
                            <td>
                              {% set emp = issue.reported.employee %}
                              {% if emp %}
                                {% if emp.permanent_details and emp.department %}
                                  {{ emp.department.name }}
                                {% elif emp.casual_details and emp.casual_details.assigned_department %}
                                  {{ emp.casual_details.assigned_department.name }}
                                {% elif emp.job_order_details and emp.job_order_details.assigned_department %}
                                  {{ emp.job_order_details.assigned_department.name }}
                                {% else %}
                                  N/A
                                {% endif %}
                              {% else %}
                                N/A
                              {% endif %}
                            </td>

                            <!-- Title -->
                            <td>{{ issue.title }}</td>
                            <td>{{ issue.description }}</td>
                            <td>
                                {% if issue.status == 'Open' %}
                                    <span class="badge bg-primary">{{ issue.status }}</span>
                                {% elif issue.status == 'In Progress' %}
                                    <span class="badge bg-warning text-dark">{{ issue.status }}</span>
                                {% elif issue.status == 'Resolved' %}
                                    <span class="badge bg-success">{{ issue.status }}</span>
                                {% elif issue.status == 'Closed' %}
                                    <span class="badge bg-secondary">{{ issue.status }}</span>
                                {% else %}
                                    <span class="badge bg-info">{{ issue.status }}</span>
                                {% endif %}
                            </td>
                            <td>{{ issue.created_at.strftime('%B %d, %Y') }}</td>
                            <td>{{ issue.remarks or 'No remarks provided.' }}</td> <!-- Added -->
                        </tr>
                        {% else %}
                        <tr><td colspan="7">No issue reports found.</td></tr>
                        {% endfor %}
                    </tbody>
                </table>

           
            </div>
         



        </div>
          </div>
        </div>
        
      </div>
    </div>
    

</div>
  





{% for issue in open_issues %}
<div class="modal fade" id="updateModal{{ issue.id }}" tabindex="-1" aria-labelledby="updateModalLabel{{ issue.id }}" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <form method="POST" action="{{ url_for('UpdateIssueModal') }}">
        <div class="modal-header">
          <h5 class="modal-title" id="updateModalLabel{{ issue.id }}">Confirm Action</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <input type="hidden" name="issue_id" value="{{ issue.id }}">
          <input type="hidden" name="status" value="In Progress">
          
          <p class="fs-5">
            Are you sure you want to mark this issue as <strong>In Progress</strong>?
          </p>

          <div class="mb-3">
            <label class="form-label">Issue Reported</label>
            <input type="text" class="form-control" value="{{ issue.title }}" disabled>
          </div>

          <div class="mb-3">
            <label class="form-label">Issue Description</label>
            <textarea class="form-control" rows="3" disabled>{{ issue.description }}</textarea>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-success">Yes, Update</button>

        </div>
      </form>
    </div>
  </div>
</div>
{% endfor %}


{% for issue in in_progress_issues %}
<div class="modal fade" id="remarksModal{{ issue.id }}" tabindex="-1" aria-labelledby="remarksModalLabel{{ issue.id }}" aria-hidden="true">
<div class="modal-dialog modal-lg">
  <div class="modal-content">
    <form method="POST" action="{{ url_for('UpdateIssueRemarks') }}">
      <div class="modal-header">
        <h5 class="modal-title" id="remarksModalLabel{{ issue.id }}">Add Remarks for Issue</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <input type="hidden" name="issue_id" value="{{ issue.id }}">

        <div class="mb-3">
          <label class="form-label">Issue Title</label>
          <input type="text" class="form-control" value="{{ issue.title }}" disabled>
        </div>

        <div class="mb-3">
          <label class="form-label">Remarks</label>
          <textarea name="remarks" class="form-control" rows="4" required>{{ issue.remarks or '' }}</textarea>
        </div>
      </div>

      <div class="modal-footer">
        <button type="submit" class="btn btn-success">Save Remarks</button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
      </div>
    </form>
  </div>
</div>
</div>
{% endfor %}


<!-- SAVING TABS -->
<script src="{{ url_for('static', filename='js/savingtabs.js') }}"></script>


<!-- <script src="{{ url_for('static', filename='js/loadingtitle.js') }}"></script> -->


<!-- <script>

  function enableTableSearch(inputId, tableId) {
    const searchInput = document.getElementById(inputId);
    const table = document.getElementById(tableId);

    if (!searchInput || !table) {
      console.warn(`Search input or table not found: #${inputId}, #${tableId}`);
      return;
    }

    const tbody = table.querySelector("tbody");
    const rows = tbody.getElementsByTagName("tr");

    searchInput.addEventListener("input", function () {
      const filter = searchInput.value.toLowerCase();
      Array.from(rows).forEach(row => {
        const text = row.textContent.toLowerCase();
        row.style.display = text.includes(filter) ? "" : "none";
      });
    });
  }

  // Example usage after DOM is loaded
  document.addEventListener("DOMContentLoaded", function () {
    enableTableSearch("searchInput", "employeeTable");
    enableTableSearch("searchCasual", "casualtbl");
    enableTableSearch("searchJO", "JOtbl");

  });
</script> -->

<!-- searchfilter -->
<script>
  function enableTableSearch(inputId, tableId) {
    const searchInput = document.getElementById(inputId);
    const table = document.getElementById(tableId);

    if (!searchInput || !table) return;

    const tbody = table.querySelector("tbody");
    const rows = tbody.querySelectorAll("tr");

    searchInput.addEventListener("input", function () {
      const filter = searchInput.value.toLowerCase();
      rows.forEach(row => {
        const text = row.textContent.toLowerCase();
        row.style.display = text.includes(filter) ? "" : "none";
      });
    });
  }

  document.addEventListener("DOMContentLoaded", function () {
    enableTableSearch("searchInput", "openTable");
    enableTableSearch("searchCasual", "inProgressTable");
    enableTableSearch("searchJO", "resolvedTable");
  });
</script>


<!-- employee filter -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const dropdownPairs = [
      { deptId: 'departmentSelectOpen', empId: 'employeeSelectOpen' },
      { deptId: 'departmentSelectProgress', empId: 'employeeSelectProgress' },
      { deptId: 'departmentSelectResolved', empId: 'employeeSelectResolved' }
    ];

    dropdownPairs.forEach(({ deptId, empId }) => {
      const departmentSelect = document.getElementById(deptId);
      const employeeSelect = document.getElementById(empId);

      if (!departmentSelect || !employeeSelect) return;

      departmentSelect.addEventListener('change', function () {
        const deptIdValue = this.value;
        employeeSelect.innerHTML = '<option selected disabled>Select employee</option>';
        employeeSelect.disabled = true;

        if (!deptIdValue) return;

        fetch(`/api/employees/${deptIdValue}`)
          .then(response => response.json())
          .then(employees => {
            if (employees.length > 0) {
              employees.forEach(emp => {
                const option = document.createElement('option');
                option.value = emp.id;
                option.textContent = emp.name;
                employeeSelect.appendChild(option);
              });
              employeeSelect.disabled = false;
            } else {
              const option = document.createElement('option');
              option.textContent = 'No employees found';
              option.disabled = true;
              employeeSelect.appendChild(option);
            }
          })
          .catch(error => {
            console.error('Error fetching employees:', error);
          });
      });
    });
  });
</script>


{% block scripts %}
<script>
$(document).ready(function () {
    // Force table layout fixed for all DataTables
    $('table.dataTable').css({
        'table-layout': 'fixed',
        'width': '100%'
    });

    // Common options for all tables
    const commonOptions = (searchPlaceholder) => ({
        paging: true,
        searching: true,
        ordering: true,
        responsive: true,
        autoWidth: false,
        columnDefs: [
            { width: '11%', targets: 0 },
            { width: '11%', targets: 1 },
            { width: '11%', targets: 2 },
            { width: '11%', targets: 3 },
            { width: '11%', targets: 4 },
            { width: '11%', targets: 5 },
            { width: '11%', targets: 6 },
            { width: '11%', targets: 7 },
            { width: '11%', targets: 8 }
        ],
        dom: '<"row mb-3"<"col-md-6 d-flex align-items-center"f><"col-md-6 text-end"l>>t<"row mt-3"<"col-md-6"i><"col-md-6 text-end"p>>',
        language: {
            search: "",
            searchPlaceholder: searchPlaceholder
        }
    });

    // Initialize tables
    var openTable = $('#openTable').DataTable(commonOptions("Search Open Issues..."));
    var inProgressTable = $('#inProgressTable').DataTable(commonOptions("Search In Progress Issues..."));
    var resolvedTable = $('#resolvedTable').DataTable(commonOptions("Search Resolved Issues..."));

    // Style search inputs
    $(".dataTables_filter input")
        .addClass("form-control form-control-lg w-auto")
        .css("margin-left", "0");

    // Style entries dropdown
    $(".dataTables_length select")
        .addClass("form-select form-select-lg")
        .css("min-width", "80px");

    // Adjust columns when switching Bootstrap tabs
    $('button[data-bs-toggle="tab"]').on('shown.bs.tab', function () {
        $.fn.dataTable
            .tables({ visible: true, api: true })
            .columns.adjust();
    });


});
</script>
{% endblock %}



{% endblock content %}